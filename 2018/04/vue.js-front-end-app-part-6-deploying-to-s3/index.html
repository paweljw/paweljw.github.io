

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.40.3">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Vue.js front end app, part 6: Deploying to S3</title>
    <meta name="author" content="Paweł J. Wal">
    <meta name="keywords" content=", development, ruby, ruby on rails, es6, javascript, electronics, arduino, science">

    <link rel="icon" href="https://paweljw.github.io/favicon.png">
    

    
    <meta name="description" content="In this final episode of the series, we&rsquo;ll take a look at deploying our Single Page Application to Amazon Web Services Simple Storage Service (or S3).

">
    <meta property="og:description" content="In this final episode of the series, we&rsquo;ll take a look at deploying our Single Page Application to Amazon Web Services Simple Storage Service (or S3).

">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Vue.js front end app, part 6: Deploying to S3">
    <meta property="og:url" content="/2018/04/vue.js-front-end-app-part-6-deploying-to-s3/">
    <meta property="og:site_name" content="Shenanigans! - a blog on programming, technology and science">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Vue.js front end app: Deploying to S3">
    <meta name="twitter:description" content="In this final episode of the series, we&rsquo;ll take a look at deploying our Single Page Application to Amazon Web Services Simple Storage Service (or S3).

">
    
      <meta name="twitter:creator" content="@paweljwal">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/5a78de40753ba5abf8fcf3a46c748d53?s=640">
    

    
    
      <meta property="og:image" content="https://paweljw.github.io/media/launch.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="https://paweljw.github.io/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-51524008-2', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title" style="text-overflow: ellipsis; overflow: hidden; white-space: nowrap; width: 70%; max-height: 55px; margin: 0 auto; display: block">
    <a class="header-title-link" href="https://paweljw.github.io/"  style="text-overflow: ellipsis">Shenanigans! - a blog on programming, technology and science</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://paweljw.github.io/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/5a78de40753ba5abf8fcf3a46c748d53?s=90" alt="" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://paweljw.github.io/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/5a78de40753ba5abf8fcf3a46c748d53?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Paweł J. Wal</h4>
        
          <h5 class="sidebar-profile-bio">Hi, I&rsquo;m Paweł. I <a href="https://github.com/paweljw">hack on stuff</a> and write about things.</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://paweljw.github.io/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://paweljw.github.io/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://paweljw.github.io/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://paweljw.github.io/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://linkedin.com/in/pawe%c5%82-wal-a478a785" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
      
      <span class="sidebar-button-desc">LinkedIn</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/paweljw" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">@paweljw</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/paweljwal" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">@paweljwal</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://paweljw.github.io/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              "
       style="background: linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url('/media/launch.jpg'); background-size: cover"
       data-behavior="5">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Vue.js front end app, part 6: Deploying to S3
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2018-04-03T13:00:00&#43;02:00">
      
  
  
  
  
    2018-04-03
  

    </time>
  
  

</div>

</div>
    
  </div>


      <div id="main" data-behavior="5"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>In this final episode of the series, we&rsquo;ll take a look at deploying our Single Page Application to Amazon Web Services Simple Storage Service (or S3).</p>

<p></p>

<p><details>
  <summary><em>This series is composed of multiple articles! Click here for a table of contents.</em></summary></p>

<ul>
<li><a href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-1-setting-up-the-app/">Part 1: Setting up the app</a></li>
<li><a href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-2-design-is-not-hard/">Part 2: Design is (not) hard</a></li>
<li><a href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-3-authentication/">Part 3: Authentication</a></li>
<li><a href="https://paweljw.github.io/2017/10/vue.js-front-end-app-part-4-keeping-state-with-vuex/">Part 4: Keeping state with Vuex</a></li>
<li><a href="https://paweljw.github.io/2018/01/vue.js-front-end-app-part-5-data-presentation/">Part 5: Data presentation</a></li>
<li>Part 6: Deploying to S3
</details></li>
</ul>

<h1 id="wait-what-do-you-mean-final">Wait, what do you mean &ldquo;final&rdquo;?!</h1>

<p><em>&ldquo;We were supposed to edit data as well&rdquo;</em>, you&rsquo;ll probably tell me. But with what we know by now, it&rsquo;s easy. You just make a form, give it a button, and POST an API call to the backend. We&rsquo;ve gone over all the basic building blocks for that. Heck, we <em>already have a form</em> that gets posted: it&rsquo;s our login form!</p>

<p>I started an article about it, and the more I went along, the more I found myself writing sentences along the lines of &ldquo;we can do this exactly the same way as here, &lt;insert link&gt;.&rdquo; That&rsquo;s boring, repetitive, and - I feel - disrespectful of you, the reader. If I wanted to start a clickbait blog, I&rsquo;d publish articles like &ldquo;10 Ruby functions that help you lose weight overnight&rdquo;.</p>

<p>I want to do things that feel fresh and fun with you, so we&rsquo;ll skip that one. But I did say that we&rsquo;ll do those forms eventually, and I&rsquo;m sorry if I let you down. I hope we can still be friends.</p>

<p>Okay, whine-rant section over. Let&rsquo;s get crackin&rsquo;.</p>

<h1 id="so-what-s-this-s3-thing">So what&rsquo;s this S3 thing?</h1>

<p>I imagine a lot of you already know, but let&rsquo;s go over this bery briefly. The S3 is a part of Amazon Web Services that lets you store a whole bunch of data and serve them up for download reasonably cheaply - you can check out their pricing <a href="https://aws.amazon.com/s3/pricing/">here</a>. For what it&rsquo;s worth, I&rsquo;ve got an app in production that stores a very small amount (&lt; 1GB) of data on S3 and fields a moderate amount of requests for those (~ 10<sup>9</sup> per month); the cost of S3 alone hovers around $90 for that. Your mileage can and will vary, of course, depending on use case, region and so forth.</p>

<h2 id="can-t-we-just-store-static-pages-on-our-webserver">Can&rsquo;t we just store static pages on our webserver?</h2>

<p>If we&rsquo;re assuming that our app will get very little traffic, it can be cost-effective to just do that, sure. What we&rsquo;re going to do here applies more to apps with moderate and higher traffic, because it helps us scale.</p>

<p>Quite a long time ago, when I talked about <a href="https://paweljw.github.io/2017/07/rails-5.1-api-with-vue.js-frontend-part-3-api-versioning/">the &ldquo;why&rdquo; of namespacing APIs</a>, I dreamt up a scenario where our app gains traction rapidly. When that happens, you&rsquo;ll need to scale with demand for your services. If your app is one big clump of backend and frontend code that lives on a single machine, you suddenly have a whole lot of work to do separating the code so it can be scaled separately. But if your app was separated, then all the scaling work needs to be done just on the backend - no frontend fussing around required.</p>

<p>It also makes it cheaper to scale. Application servers - like the premade ones you get from Heroku, or ones you manage yourself on AWS EC2 or Microsoft Azure - cost much more than static file storage. We should have this pricier asset working full clip to serve <em>application</em> requests. While it&rsquo;s serving requests for static files, the server is not fielding requests to the actual application backend, given that a server&rsquo;s CPU, RAM, network connection etc. are a finite resource.</p>

<h1 id="how-do-i-get-an-s3">How do I get an S3?</h1>

<p>First we need an AWS account. You&rsquo;ll want to go to <a href="https://portal.aws.amazon.com/billing/signup">https://portal.aws.amazon.com/billing/signup</a> and set one up if you don&rsquo;t have one.</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/amazon-signup.png">
        <img src="https://paweljw.github.io/media/vue-deploy/amazon-signup.png" />
    </a>
    
</figure>


<p>While creating your account, you should be prompted with information about your access key and secret key. It&rsquo;s imperative that you take note of those and store them safely, since once they&rsquo;re shown to you once, there&rsquo;s no way to recover the secret key aside from creating a new pair of those credentials.</p>

<p>By the way, if it&rsquo;s your first ride on the AWS rollercoaster, they&rsquo;ll allow you to use some parts of their service for free (to help lock you in as a customer, of course) - I encourage you to play around if you&rsquo;re eligible for that, it&rsquo;s quite fun.</p>

<p><em>Since I&rsquo;ve been asked about this a couple of times - I&rsquo;m not affiliated with Heroku, Travis CI or Amazon. The links I include in my articles are not referral links. I don&rsquo;t get anything for mentioning them. I consider them good tools so I show how to use them - and that&rsquo;s it.</em></p>

<p>After logging in, you&rsquo;ll see something like this.</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/amazon-logged.png">
        <img src="https://paweljw.github.io/media/vue-deploy/amazon-logged.png" />
    </a>
    
</figure>


<p>Click on, or search for &ldquo;S3&rdquo;. You&rsquo;ll find a button that says &ldquo;Create bucket&rdquo;.</p>

<h2 id="bucket">&ldquo;Bucket&rdquo;?</h2>

<p>A bucket is a top-level data organization structure in S3. The bucket name is unique across a whole Amazon region, and it&rsquo;s how we can refer to it.</p>

<p>A bucket can be set to private or public. A private bucket can hold, for example, your backups or your logs - data you won&rsquo;t be showing off to the public. A public bucket can hold something like user uploads in a typical web application, or a whole static website. Something like this blog could be hosted on S3 - and so can an SPA.</p>

<p>Let&rsquo;s dig into the bucket creation process and we&rsquo;ll explain more as we go along.</p>

<h2 id="creating-a-bucket">Creating a bucket</h2>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/create-bucket.png">
        <img src="https://paweljw.github.io/media/vue-deploy/create-bucket.png" />
    </a>
    
</figure>


<p>We&rsquo;ll need to supply a name. I&rsquo;ll go for something like <code>bookstore-frontend-paweljw</code>. Like we said before, it needs to be unique across a whole region and DNS-compatible, so think about yours for a while.</p>

<p>We also need to set a region for this bucket. The Ireland region is closest to me, so it&rsquo;s what I usually rely on. Pick whatever you want, but remember that this affects where your files are physically located, and therefore your latency.</p>

<p><em>When you&rsquo;re creating a real application, you should consider replicating your data to multiple regions, or even using a caching solution like Cloudflare or AWS CloudFront. This will ensure that your page loads faster for your users.</em></p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/create-bucket2.png">
        <img src="https://paweljw.github.io/media/vue-deploy/create-bucket2.png" />
    </a>
    
</figure>


<p>The next screen has a whole bunch of big-sounding options, none of which we really need right now. We can just &ldquo;Next&rdquo; over it.</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/create-bucket3.png">
        <img src="https://paweljw.github.io/media/vue-deploy/create-bucket3.png" />
    </a>
    
</figure>


<p>On this page, we want to grant public read acces to our bucket. Amazon will try to scare us away saying that it&rsquo;s not recommended. That&rsquo;s due to a series of high-profile data leaks where people put private data (such as backups) in public buckets and someone figured out they did. <em>If you&rsquo;re creating a bucket for such purposes, NEVER make it public.</em></p>

<p>However, we want our data - our SPA - to be served publicly, so we&rsquo;ll ignore the warning. We can do it because we know what we&rsquo;re doing and understand the consequences (which is the only set of circumstances under which you should ignore a warning).</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/bucket-created.png">
        <img src="https://paweljw.github.io/media/vue-deploy/bucket-created.png" />
    </a>
    
</figure>


<p>After reviewing our settings, we&rsquo;ll find our new bucket on the buckets list. We&rsquo;re half way there already!</p>

<h1 id="configuring-s3-for-static-website-hosting">Configuring S3 for static website hosting</h1>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/static-website-hosting.png">
        <img src="https://paweljw.github.io/media/vue-deploy/static-website-hosting.png" />
    </a>
    
</figure>


<p>After clicking through to our bucket, we&rsquo;ll go to the permissions tab and find a new option waiting for us: static website hosting.</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/static-website-hosting2.png">
        <img src="https://paweljw.github.io/media/vue-deploy/static-website-hosting2.png" />
    </a>
    
</figure>


<p>We&rsquo;ll want to set it to &ldquo;Use this bucket to host a website&rdquo;. The default index document of &ldquo;index.html&rdquo; is fine for us, since this is what gets generated in our setup - we just have to type it in. We don&rsquo;t have an error document, so we&rsquo;ll type in &ldquo;index.html&rdquo; as well. In a real app we&rsquo;d probably want to set it up so it points to an actual error page. Otherwise S3 will throw up an ugly default error message.</p>

<p>Take note of the &ldquo;endpoint&rdquo;. This is where our files will show up when we deploy them. Currently it&rsquo;ll just throw a 404 error.</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/error.png">
        <img src="https://paweljw.github.io/media/vue-deploy/error.png" />
    </a>
    
</figure>


<h1 id="deploying-the-vue-app-to-s3">Deploying the Vue app to S3</h1>

<p>The bucket is ready, time to fill it up. There&rsquo;s a little NPM package that will help us: <a href="https://www.npmjs.com/package/s3-deploy">s3-deploy</a>. Let&rsquo;s install it:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ npm install --save-dev s3-deploy</code></pre></div>
<p>We&rsquo;ll need to give s3-deploy access to our AWS account. The quick and easy method of doing this will be through a special file, located in <code>~/.aws/credentials</code>. It should look a little bit like this:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#007020;font-weight:bold">[bookstore-frontend]</span>
<span style="color:#4070a0">aws_access_key_id</span> <span style="color:#666">=</span> <span style="color:#4070a0">AKEXAMPLEEXAMPLE</span>
<span style="color:#4070a0">aws_secret_access_key</span> <span style="color:#666">=</span> <span style="color:#4070a0">someexample123secretkey</span></code></pre></div>
<p>The phrase in the square brackets is called a &ldquo;profile&rdquo;. I like to set up my projects so that I have a profile per project (you can put multiple profiles in the <code>~/.aws/credentials</code> file). If you want a set of credentials to be chosen every time you don&rsquo;t specify a profile, name it <code>default</code>.</p>

<p>The access key and secret are the credential pair you took note of during account creation (or if you already had an account, you should have your pair stashed somewhere).</p>

<p>Now that we have our credentials set up, we can deploy our SPA like so:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ npm run build
$ node node_modules/s3-deploy/.bin/s3-deploy <span style="color:#4070a0">&#39;./dist/**&#39;</span> --cwd <span style="color:#4070a0">&#39;./dist/&#39;</span> --region eu-west-1 --bucket your-bucket-name --profile your-profile-name</code></pre></div>
<p>There are a couple of issues with this: it&rsquo;s not a single command, it&rsquo;s a mouthful, and our app won&rsquo;t work yet. Let&rsquo;s fix those issues one by one.</p>

<h2 id="it-s-a-mouthful">It&rsquo;s a mouthful</h2>

<p>We&rsquo;ll update our <a href="https://github.com/paweljw/bookstore-frontend/blob/master/package.json"><code>package.json</code></a> file to include a <code>deploy</code> command.</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="">//</span> <span style="">...</span>
  <span style="color:#062873;font-weight:bold">&#34;scripts&#34;</span>: {
    <span style="">//</span> <span style="">...</span>
    <span style="color:#062873;font-weight:bold">&#34;deploy&#34;</span>: <span style="color:#4070a0">&#34;node node_modules/s3-deploy/.bin/s3-deploy &#39;./dist/**&#39; --cwd &#39;./dist/&#39; --region eu-west-1 --bucket bookstore-frontend-paweljw --profile bookstore-frontend&#34;</span>
  },
  <span style="">//</span> <span style="">...</span>
}</code></pre></div>
<p>It&rsquo;s worth noting that I can just throw up my whole command up here and in the repository, since it&rsquo;s not a secret: the secrets are stored outside the repo in my <code>~/.aws/credentials</code> file.</p>

<h2 id="can-t-do-a-release-in-a-single-command">Can&rsquo;t do a release in a single command</h2>

<p>In the same file, we&rsquo;ll roll up our two commands into one called <code>release</code>:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="">//</span> <span style="">...</span>
  <span style="color:#062873;font-weight:bold">&#34;scripts&#34;</span>: {
    <span style="">//</span> <span style="">...</span>
    <span style="color:#062873;font-weight:bold">&#34;release&#34;</span>: <span style="color:#4070a0">&#34;npm run build &amp;&amp; npm run deploy&#34;</span>
  },
  <span style="">//</span> <span style="">...</span>
}</code></pre></div>
<p>Note the usage of <code>&amp;&amp;</code> here. If the first command fails the second will not run, so if something borks itself during build, we won&rsquo;t deploy half-built artifacts to S3.</p>

<h2 id="it-won-t-work-yet">It won&rsquo;t work yet</h2>

<p>Let&rsquo;s have a little throwback to our <a href="https://github.com/paweljw/bookstore-frontend/blob/master/src/backend/vue-axios/axios.js">axios setup</a> file:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#007020;font-weight:bold">import</span> axios from <span style="color:#4070a0">&#39;axios&#39;</span>

<span style="color:#007020;font-weight:bold">const</span> API_URL <span style="color:#666">=</span> process.env.API_URL <span style="color:#666">||</span> <span style="color:#4070a0">&#39;http://localhost:3000/api/v1&#39;</span>

<span style="color:#007020;font-weight:bold">export</span> <span style="color:#007020;font-weight:bold">default</span> axios.create({
  baseURL<span style="color:#666">:</span> API_URL,
  headers<span style="color:#666">:</span> {
    <span style="color:#4070a0">&#39;Content-Type&#39;</span><span style="color:#666">:</span> <span style="color:#4070a0">&#39;application/json&#39;</span>,
    <span style="color:#4070a0">&#39;Authorization&#39;</span><span style="color:#666">:</span> <span style="color:#4070a0">&#39;Bearer &#39;</span> <span style="color:#666">+</span> localStorage.token
  }
})
</code></pre></div>
<p>We&rsquo;re set up so that our API calls hit localhost, or whatever is in the <code>API_URL</code> environment variable <em>at build time</em>. As it is right now, our app builds with the default localhost address because we didn&rsquo;t tell it otherwise.</p>

<p>The funny thing is, if you have our backend app running on your computer, it will work - you can try it if you don&rsquo;t believe me! But we neither expect nor <em>want</em> our users to have a copy of our backend running on their machines, so we have to tell Vue.js where the production endpoint lies.</p>

<p>Thankfully, there&rsquo;s a very easy way to set production environment variables for Vue.js builds, in <a href="https://github.com/paweljw/bookstore-frontend/blob/master/config/prod.env.js"><code>config/prod.env.js</code></a>. We&rsquo;ll modify the app to look something like this:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">module.exports <span style="color:#666">=</span> {
  API_URL<span style="color:#666">:</span> <span style="color:#4070a0">&#39;&#34;http://someplace-that-runs-your-backend&#34;&#39;</span>,
  NODE_ENV<span style="color:#666">:</span> <span style="color:#4070a0">&#39;&#34;production&#34;&#39;</span>
}
</code></pre></div>
<p>If you followed the backend series, your app should be on Heroku, so you can place it&rsquo;s URL here.</p>

<h1 id="ship-it">Ship it!</h1>

<p>Now that we&rsquo;ve made all those changes, we can simply run:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ npm run release</code></pre></div>
<p>And when we head over to our S3 &ldquo;endpoint&rdquo; URL&hellip;</p>


<figure>
    <a href="https://paweljw.github.io/media/vue-deploy/running.png">
        <img src="https://paweljw.github.io/media/vue-deploy/running.png" />
    </a>
    
</figure>


<p>Ta-daaa! 🤩</p>

<p><img src="https://media.giphy.com/media/J3hSvKHJC7d28/giphy.gif" style="display: block; margin: 0 auto"></img></p>

<h1 id="we-re-done">We&rsquo;re done!</h1>

<p>We went over a huge amount of topics relating to <a href="https://paweljw.github.io/2017/07/rails-5.1-api-with-vue.js-frontend-part-0-stack-choices/">Rails API apps</a> and <a href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-1-setting-up-the-app/">Vue.js single page applications</a>. There are 12 articles in both series, spanning a whopping 10 months, which is probably the longest I&rsquo;ve blogged about a single thing in my entire life - if you&rsquo;d like a refresher, just hit the links in the previous sentences. As always, the changes done to the code in this article are available on <a href="https://github.com/paweljw/bookstore-frontend/commit/4fa6c42266c2bf6d10b7b6af68cfbd205f81295b">GitHub</a>.</p>

<p>I&rsquo;d like to thank you all for reading, commenting, and helping me learn. Be sure to check back in the future! I probably won&rsquo;t be starting another huge multi-article, multi-month journey anytime soon, but there&rsquo;ll be some interesting bits to tide you over until we embark on another one of those.</p>

<p>See you soon!</p>

<hr />

<p>Top image credit: <a href="https://commons.wikimedia.org/wiki/File:Soyuz_TMA-05M_rocket_launches_from_Baikonur_4.jpg">https://commons.wikimedia.org/wiki/File:Soyuz_TMA-05M_rocket_launches_from_Baikonur_4.jpg</a> (Public Domain)</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            <div id="i-like-beer" style="text-align: center; margin: 0 auto; display: block; color: #999; font-size: 90%">
  <hr/>
  <br/>
  <p>Hey there! I hope you found the post above useful. If you feel it's worth it, and are capable of doing so, please consider <a href="https://paypal.me/paweljw">buying me a beer</a> through PayPal, or tweet <a href="https://twitter.com/paweljwal">@paweljwal</a> if you want to grab one offline when you're in Kraków, MA, Poland.</p>
  <small>If you want to remove this text with your adblocker, the selector is <code>#i-like-beer</code>.</small>
  <hr/>
</div>
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/follow-me/">follow me</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/javascript/">javascript</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/es6/">es6</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/vue.js/">vue.js</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/vue-frontend-series/">vue-frontend-series</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/aws/">aws</a>

  <a class="tag tag--primary tag--small" href="https://paweljw.github.io//tags/s3/">s3</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://paweljw.github.io/2018/05/ruby-vs-elixir-an-api-battle-royale/" data-tooltip="Ruby vs Elixir: an API battle royale">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://paweljw.github.io/2018/01/vue.js-front-end-app-part-5-data-presentation/" data-tooltip="Vue.js front end app, part 5: Data presentation">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    Created by <a href="https://github.com/paweljw">Paweł J. Wal</a> | <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://paweljw.github.io/2018/05/ruby-vs-elixir-an-api-battle-royale/" data-tooltip="Ruby vs Elixir: an API battle royale">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://paweljw.github.io/2018/01/vue.js-front-end-app-part-5-data-presentation/" data-tooltip="Vue.js front end app, part 5: Data presentation">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fpaweljw.github.io%2f2018%2f04%2fvue.js-front-end-app-part-6-deploying-to-s3%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/5a78de40753ba5abf8fcf3a46c748d53?s=110" alt="" />
    
    <h4 id="about-card-name">Paweł J. Wal</h4>
    
      <div id="about-card-bio">Hi, I&rsquo;m Paweł. I <a href="https://github.com/paweljw">hack on stuff</a> and write about things.</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Sofware Magician
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Poland
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2018/05/ruby-vs-elixir-an-api-battle-royale/">
                <h3 class="media-heading">Ruby vs Elixir: an API battle royale</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><em>&ldquo;Ruby&rsquo;s dying, man&rdquo;</em>, they keep telling me. <em>&ldquo;Besides, it&rsquo;s OOP, and that&rsquo;s so 2013, functional programming is all the rage now. Oh, and there&rsquo;s this new kid on the blog, it&rsquo;s called Elixir. It&rsquo;s functional programming for the avid Rubyist!&rdquo;</em></p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2018/04/vue.js-front-end-app-part-6-deploying-to-s3/">
                <h3 class="media-heading">Vue.js front end app, part 6: Deploying to S3</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>In this final episode of the series, we&rsquo;ll take a look at deploying our Single Page Application to Amazon Web Services Simple Storage Service (or S3).</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2018/01/vue.js-front-end-app-part-5-data-presentation/">
                <h3 class="media-heading">Vue.js front end app, part 5: Data presentation</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>New year, new <del>you</del> blog post! In this long overdue part we&rsquo;ll strengthen our command of loading data from the server and take a look at presenting it.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/10/vue.js-front-end-app-part-4-keeping-state-with-vuex/">
                <h3 class="media-heading">Vue.js front end app, part 4: Keeping state with Vuex</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Last time we built an <a href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-3-authentication/">authentication mechanism</a> with a pretty glaring bug - you can just set the <code>token</code> in <code>localStorage</code> to whatever and it&rsquo;ll let you in. We need to actually read the token, and persist what we&rsquo;ve read so we don&rsquo;t have to do it over and over.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-3-authentication/">
                <h3 class="media-heading">Vue.js front end app, part 3: Authentication</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>In this part we&rsquo;ll allow the user to log in to our frontend app, using the <a href="https://paweljw.github.io/2017/07/rails-5.1-api-app-part-4-authentication-and-authorization/">auth mechanism</a> we&rsquo;ve built on the back end earlier. A lot of topics in this one, so jump right in!</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-2-design-is-not-hard/">
                <h3 class="media-heading">Vue.js front end app, part 2: Design is (not) hard</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Now that we have our environment running, the app is initialized, and we know a little bit about what&rsquo;s going on in there, it&rsquo;s time to take a little bit of time to design our front end.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/09/saturday-project-temperature-and-humidity-meter-with-onion-omega2-/">
                <h3 class="media-heading">Saturday project: temperature and humidity meter with Onion Omega2&#43;</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Quick thing I threw together in about an hour: an IoT temperature and humidity meter!</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/09/vue.js-front-end-app-part-1-setting-up-the-app/">
                <h3 class="media-heading">Vue.js front end app, part 1: Setting up the app</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Last time we’ve seen each other, we’ve just deployed our Rails 5.1 API app. Time to put an end to this! A <em>front</em> end, of course.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/07/rails-5.1-api-app-part-5-deploying-with-confidence/">
                <h3 class="media-heading">Rails 5.1 API app, part 5: Deploying with confidence</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>In this final part of our Rails API app series we&rsquo;ll talk about specs, code coverage, continuous integration and deployment - and how to be certain your application is working.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://paweljw.github.io/2017/07/rails-5.1-api-app-part-4-authentication-and-authorization/">
                <h3 class="media-heading">Rails 5.1 API app, part 4: Authentication and authorization</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Time to deal with authenticating users in our bookstore application.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         21 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://paweljw.github.io/images/cover2.jpeg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="https://paweljw.github.io/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/paweljw.github.io\/2018\/04\/vue.js-front-end-app-part-6-deploying-to-s3\/';
          
            this.page.identifier = '\/2018\/04\/vue.js-front-end-app-part-6-deploying-to-s3\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'paweljw-github-io';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

